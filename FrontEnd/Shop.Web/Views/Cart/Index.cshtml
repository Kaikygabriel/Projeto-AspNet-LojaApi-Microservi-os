@model IEnumerable<Shop.Web.Cart.Models.CartItem>

@{
ViewData["Title"] = "Meu Carrinho";
}

<div class="container mt-4">
    <h2 class="mb-4 text-center">Meu Carrinho</h2>

    @if (!Model.Any())
    {
    <div class="alert alert-info text-center">
        Seu carrinho est√° vazio ü§∑‚Äç‚ôÇÔ∏è
    </div>
    }
    else
    {
    <table class="table table-bordered table-striped align-middle">
        <thead class="table-dark">
        <tr>
            <th>Produto</th>
            <th>Pre√ßo</th>
            <th>Quantidade</th>
            <th>Total</th>
            <th>A√ß√µes</th>
        </tr>
        </thead>

        <tbody>
        @foreach (var item in Model)
        {
        <tr>
            <td style="width: 280px;">
                <div class="d-flex align-items-center gap-3">
                    <img src="@item.Product.ImageUrl"
                         class="img-thumbnail"
                         style="width: 80px; height: 80px; object-fit: cover;" />

                    <div>
                        <strong>@item.Product.Name</strong>
                        <p class="text-muted mb-0" style="font-size: 0.9rem;">
                            @item.Product.Description
                        </p>
                    </div>
                </div>
            </td>

            <td>
                R$ @item.Product.Price.ToString("F2")
            </td>

            <td>
                @item.Quantity
            </td>

            <td>
                <strong>
                    R$ @(item.Product.Price * item.Quantity)
                </strong>
            </td>

            <td>
                <a asp-action="RemoveItem"
                   asp-route-id="@item.Id"
                   class="btn btn-danger btn-sm">
                    Remover
                </a>
            </td>
        </tr>
        }
        </tbody>

    </table>

    <div class="text-end mt-3">
        <h4>
            Total do Carrinho:
            <strong class="text-success">
                R$ @Model.Sum(i => i.Product.Price * i.Quantity).ToString("N2")
            </strong>
        </h4>

        <a class="btn btn-primary btn-lg mt-2" asp-action="Checkout">
            Finalizar Compra
        </a>
    </div>
    }
</div>
